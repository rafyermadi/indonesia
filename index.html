<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ensiklopedia Indonesia Interaktif</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        /* CSS (Tampilan) */
        body { margin: 0; font-family: sans-serif; display: flex; height: 100vh; overflow: hidden; }
        
        /* Area Peta (Kiri - 70%) */
        #map { width: 70%; height: 100%; background: #aad3df; }
        
        /* Area Info (Kanan - 30%) */
        #info-box { 
            width: 30%; 
            padding: 20px; 
            background: #f9f9f9; 
            overflow-y: auto; 
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
        }

        .judul { color: #006400; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
        .hint { color: #666; font-style: italic; margin-top: 50%; text-align: center; }
        
        /* Tampilan di HP (Atas Bawah) */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            #map { width: 100%; height: 60%; }
            #info-box { width: 100%; height: 40%; }
        }
    </style>
</head>
<body>

    <div id="map"></div>

    <div id="info-box">
        <div id="content">
            <h2 class="judul">Selamat Datang! üáÆüá©</h2>
            <p class="hint">Klik salah satu provinsi di peta untuk melihat informasinya.</p>
        </div>
    </div>

    <script>
        // --- DATA ENSIKLOPEDIA (Edit di sini sesuka hati) ---
        const dataProvinsi = {
            "ACEH": { 
                ibukota: "Banda Aceh", 
                makanan: "Mie Aceh, Ayam Tangkap", 
                fakta: "Dikenal sebagai Serambi Mekkah dan titik nol kilometer Indonesia." 
            },
            "SUMATERA UTARA": { 
                ibukota: "Medan", 
                makanan: "Bika Ambon, Soto Medan", 
                fakta: "Memiliki Danau Toba, danau vulkanik terbesar di dunia." 
            },
            "SUMATERA BARAT": { 
                ibukota: "Padang", 
                makanan: "Rendang, Sate Padang", 
                fakta: "Masakan Padang dinobatkan sebagai salah satu makanan terenak di dunia." 
            },
            "RIAU": { 
                ibukota: "Pekanbaru", 
                makanan: "Gulai Ikan Patin", 
                fakta: "Salah satu penghasil minyak bumi dan kelapa sawit terbesar." 
            },
            "DKI JAKARTA": { 
                ibukota: "Jakarta Pusat", 
                makanan: "Kerak Telor, Ketoprak", 
                fakta: "Pusat pemerintahan, bisnis, dan hiburan Indonesia." 
            },
            "JAWA BARAT": { 
                ibukota: "Bandung", 
                makanan: "Seblak, Batagor", 
                fakta: "Provinsi dengan jumlah penduduk terbanyak di Indonesia." 
            },
            "JAWA TENGAH": { 
                ibukota: "Semarang", 
                makanan: "Lumpia, Gudeg", 
                fakta: "Memiliki Candi Borobudur, candi Buddha terbesar di dunia." 
            },
            "DAERAH ISTIMEWA YOGYAKARTA": { 
                ibukota: "Yogyakarta", 
                makanan: "Gudeg, Bakpia", 
                fakta: "Satu-satunya provinsi yang dipimpin oleh Sultan (Monarki)." 
            },
            "JAWA TIMUR": { 
                ibukota: "Surabaya", 
                makanan: "Rawon, Rujak Cingur", 
                fakta: "Memiliki Gunung Bromo yang pemandangannya sangat ikonik." 
            },
            "BALI": { 
                ibukota: "Denpasar", 
                makanan: "Ayam Betutu, Sate Lilit", 
                fakta: "Destinasi wisata terpopuler Indonesia di mata dunia." 
            },
            "NUSA TENGGARA BARAT": { 
                ibukota: "Mataram", 
                makanan: "Ayam Taliwang", 
                fakta: "Rumah bagi Sirkuit Mandalika dan Gunung Rinjani." 
            },
            "NUSA TENGGARA TIMUR": { 
                ibukota: "Kupang", 
                makanan: "Sei Sapi", 
                fakta: "Satu-satunya habitat asli Komodo di dunia." 
            },
            "KALIMANTAN TIMUR": { 
                ibukota: "Samarinda", 
                makanan: "Nasi Bekepor", 
                fakta: "Lokasi Ibu Kota Negara (IKN) baru, Nusantara." 
            },
            "SULAWESI SELATAN": { 
                ibukota: "Makassar", 
                makanan: "Coto Makassar, Pisang Epe", 
                fakta: "Terkenal dengan kapal Pinisi dan budaya Toraja." 
            },
            "PAPUA": { 
                ibukota: "Jayapura", 
                makanan: "Papeda, Ikan Kuah Kuning", 
                fakta: "Provinsi paling timur dengan kekayaan alam yang luar biasa." 
            }
        };

        // --- LOGIKA PETA ---
        
        // 1. Bikin Peta Dasar
        var map = L.map('map').setView([-2.5489, 118.0149], 5); // Tengah Indonesia

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // 2. Fungsi saat wilayah diklik
        function onFeatureClick(e) {
            var layer = e.target;
           // --- KODE BARU (Supaya tidak undefined) ---
            var props = layer.feature.properties;
            // Coba cari nama di berbagai kemungkinan kunci
            var namaProvinsi = props.state || props.Propinsi || props.NAME_1 || props.name || "Nama Tidak Ditemukan";
            
            // Ubah jadi huruf besar semua biar pencarian lebih gampang
            var namaKunci = namaProvinsi.toUpperCase();
            
            // Ambil data dari database kita di atas
            var info = null;
            for (var key in dataProvinsi) {
                if (key.toUpperCase() === namaKunci) {
                    info = dataProvinsi[key];
                    break;
                }
            }
            var htmlContent = "";

            if (info) {
                htmlContent = `
                    <h2 class="judul">${namaProvinsi}</h2>
                    <p><strong>üèõÔ∏è Ibukota:</strong> ${info.ibukota}</p>
                    <p><strong>üç≤ Makanan:</strong> ${info.makanan}</p>
                    <p><strong>üí° Fakta Unik:</strong><br>${info.fakta}</p>
                `;
            } else {
                htmlContent = `
                    <h2 class="judul">${namaProvinsi}</h2>
                    <p>Data belum tersedia untuk provinsi ini.</p>
                `;
            }

            // Tampilkan di kotak kanan
            document.getElementById('content').innerHTML = htmlContent;

            // Highlight wilayah yang dipilih
            geojsonLayer.eachLayer(function(l) { l.setStyle({fillColor: '#3388ff'}); }); // Reset warna
            layer.setStyle({fillColor: 'orange', fillOpacity: 0.7}); // Warna aktif
        }

        // 3. Fungsi Load GeoJSON
        var geojsonLayer;
        
        fetch('indonesia.geojson.json')
            .then(response => response.json())
            .then(data => {
                geojsonLayer = L.geoJSON(data, {
                    style: { color: "white", weight: 1, fillColor: "#3388ff", fillOpacity: 0.5 },
                    onEachFeature: function (feature, layer) {
                        layer.on('click', onFeatureClick);
                    }
                }).addTo(map);
            })
            .catch(error => console.log("Gagal memuat peta. Pastikan file indonesia.geojson sudah diupload!", error));

    </script>
</body>
</html>
